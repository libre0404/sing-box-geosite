sing-box è§„åˆ™é›†è½¬æ¢å·¥å…·
æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªç”¨äºå°†å¤šç§æ ¼å¼ï¼ˆSurge, Clash, TXTï¼‰çš„è¿‡æ»¤è§„åˆ™è‡ªåŠ¨è½¬æ¢å¹¶ç¼–è¯‘ä¸º sing-box ä¸“ç”¨äºŒè¿›åˆ¶è§„åˆ™é›†ï¼ˆ.srsï¼‰çš„è‡ªåŠ¨åŒ–å·¥å…· ã€‚

ğŸŒŸ åŠŸèƒ½ç‰¹æ€§
å¤šæ ¼å¼å…¼å®¹ï¼šæ”¯æŒè§£æ DOMAINã€DOMAIN-SUFFIXã€IP-CIDRã€GEOIP ç­‰å¤šç§è§„åˆ™ç±»å‹ã€‚


æœ¬åœ°ä¸äº‘ç«¯åŒæ¨¡å¼ï¼šæ”¯æŒåœ¨ Debian/Ubuntu æœåŠ¡å™¨æœ¬åœ°è¿è¡Œï¼Œä¹Ÿå¯é€šè¿‡ GitHub Actions å®ç°å…¨è‡ªåŠ¨äº‘ç«¯è½¬æ¢ ã€‚

äºŒè¿›åˆ¶ç¼–è¯‘ï¼šè‡ªåŠ¨è°ƒç”¨ sing-box ç¼–è¯‘å™¨å°† JSON æºç ç¼–è¯‘ä¸ºé«˜æ€§èƒ½çš„ .srs æ–‡ä»¶ã€‚


è‡ªåŠ¨åŒ–ç¯å¢ƒï¼šæœ¬åœ°è„šæœ¬ä¼šè‡ªåŠ¨é…ç½® Python è™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…æ‰€éœ€ä¾èµ–ï¼Œæ— éœ€æ‰‹åŠ¨å¹²é¢„ ã€‚

ğŸ›  Debian æœ¬åœ°ä½¿ç”¨è¯´æ˜
æ­¤æ¨¡å¼é€‚ç”¨äºåœ¨æ‚¨è‡ªå·±çš„ Linux æœåŠ¡å™¨ä¸Šç»´æŠ¤è§„åˆ™ï¼Œä¾›æœ¬åœ° sing-box å®¢æˆ·ç«¯ç›´æ¥è¯»å– ã€‚

1. æƒé™å‡†å¤‡
ç¡®ä¿è„šæœ¬å…·æœ‰æ‰§è¡Œæƒé™ï¼š

Bash

chmod +x update_rules.sh
2. æ‰§è¡Œè½¬æ¢
ä½¿ç”¨ sudo è¿è¡Œè„šæœ¬ï¼Œå®ƒå°†è‡ªåŠ¨å®Œæˆä¾èµ–å®‰è£…ã€è§„åˆ™æŠ“å–åŠç¼–è¯‘ï¼š

Bash

sudo ./update_rules.sh

ä¾èµ–ç®¡ç†ï¼šè„šæœ¬ä¼šè‡ªåŠ¨å®‰è£… python3-venv å¹¶åˆ›å»ºéš”ç¦»çš„è™šæ‹Ÿç¯å¢ƒ ã€‚


è¾“å‡ºè·¯å¾„ï¼šè½¬æ¢åçš„è§„åˆ™é»˜è®¤ä¿å­˜è‡³ /etc/sing-box/rules ç›®å½• ã€‚

3. å®šæ—¶è‡ªåŠ¨ç»´æŠ¤
æ‰§è¡Œ sudo crontab -eï¼Œæ·»åŠ ä»¥ä¸‹è¡Œï¼ˆä¾‹å¦‚æ¯å¤©å‡Œæ™¨ 4 ç‚¹è¿è¡Œï¼‰ï¼š

Bash

0 4 * * * /path/to/your/update_rules.sh > /dev/null 2>&1
â˜ï¸ GitHub Actions äº‘ç«¯åŒæ­¥
é€šè¿‡ GitHub Actionsï¼Œæ‚¨å¯ä»¥å®ç°è§„åˆ™çš„äº‘ç«¯è‡ªåŠ¨æ›´æ–°å¹¶ä½œä¸ºè¿œç¨‹è§„åˆ™æºä½¿ç”¨ã€‚

1. å¼€å¯å·¥ä½œæµæƒé™
å‰å¾€ä»“åº“ Settings -> Actions -> General -> Workflow permissionsï¼Œå‹¾é€‰ Read and write permissionsã€‚

2. è‡ªåŠ¨åŒ–æœºåˆ¶
è§¦å‘æ–¹å¼ï¼šæ”¯æŒä»£ç æ¨é€ï¼ˆpushï¼‰ã€æ‰‹åŠ¨è§¦å‘ï¼ˆworkflow_dispatchï¼‰ä»¥åŠå®šæ—¶ä»»åŠ¡ï¼ˆcronï¼‰ã€‚

äº‘ç«¯ç¯å¢ƒï¼šå·¥ä½œæµä¼šè‡ªåŠ¨å®‰è£… sing-box ç¯å¢ƒå¹¶è¿è¡Œ main.py è¿›è¡Œè§„åˆ™è½¬æ¢ã€‚

äº§å‡ºç®¡ç†ï¼šç”Ÿæˆçš„ .srs å’Œ .json æ–‡ä»¶å°†è‡ªåŠ¨æäº¤å¹¶åŒæ­¥å›æ‚¨çš„ GitHub ä»“åº“ã€‚

ğŸ“ è§„åˆ™é…ç½®æŒ‡å—
ç¼–è¾‘è®¢é˜…åˆ—è¡¨ (links.txt)
åœ¨ links.txt ä¸­æ·»åŠ è§„åˆ™æºï¼Œæ”¯æŒä»¥ä¸‹ä¸¤ç§å½¢å¼ï¼š

è¿œç¨‹ URLï¼šä¾‹å¦‚ https://raw.githubusercontent.com/.../gfw.txtã€‚

æœ¬åœ°è·¯å¾„ï¼šæ”¯æŒé€šé…ç¬¦ï¼Œä¾‹å¦‚ /mnt/data/rules/*.txtï¼ˆæ³¨ï¼šä»…åœ¨æœ¬åœ°è¿è¡Œæ—¶æœ‰æ•ˆï¼‰ã€‚

sing-box å¼•ç”¨ç¤ºä¾‹
æ‚¨å¯ä»¥åœ¨ sing-box çš„é…ç½®æ–‡ä»¶ä¸­å¼•ç”¨ GitHub ä»“åº“ç”Ÿæˆçš„è¿œç¨‹è§„åˆ™ï¼š

JSON

{
  "tag": "my-rule",
  "type": "remote",
  "format": "binary",
  "url": "https://raw.githubusercontent.com/æ‚¨çš„ç”¨æˆ·å/ä»“åº“å/main/rules/æ–‡ä»¶å.srs",
  "download_detour": "proxy"
}
ğŸ¤ è‡´è°¢
æœ¬é¡¹ç›®é€»è¾‘å‚è€ƒåŠè‡´è°¢ï¼ˆæ’åä¸åˆ†å…ˆåï¼‰ï¼š @izumiChan16 | @ifaintad | @NobyDa | @blackmatrix7 | @DivineEngine
